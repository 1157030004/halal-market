{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import IconButton from'@material-ui/core/IconButton';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Paper from'@material-ui/core/Paper';import CancelRoundedIcon from'@material-ui/icons/CancelRounded';import BorderColorRoundedIcon from'@material-ui/icons/BorderColorRounded';import{listOrders}from'../actions/orderActions';var OrderListScreen=function OrderListScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var orderList=useSelector(function(state){return state.orderList;});var loading=orderList.loading,error=orderList.error,orders=orderList.orders;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listOrders());}else{history.push('/login');}},[dispatch,userInfo,history]);return/*#__PURE__*/React.createElement(\"div\",{className:\"userList__container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Orders\"),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{severity:\"error\"},error):/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:\"userList__table\",\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Id\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"User\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Date\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Total\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Paid\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Delivered\"))),/*#__PURE__*/React.createElement(TableBody,null,orders.map(function(order){return/*#__PURE__*/React.createElement(TableRow,{key:order._id},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},order._id),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.user&&order.user.name),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.createdAt.substring(0,10)),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"$\",order.totalPrice),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/React.createElement(CancelRoundedIcon,null)),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.isDelivered?order.deliveredAt:/*#__PURE__*/React.createElement(CancelRoundedIcon,null)),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(Link,{to:\"/order/\".concat(order._id)},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"order\",color:\"primary\"},/*#__PURE__*/React.createElement(BorderColorRoundedIcon,null)))));})))));};export default OrderListScreen;","map":{"version":3,"sources":["G:/code/ecommerce/frontend/src/screens/OrderListScreen.js"],"names":["React","useEffect","Link","useDispatch","useSelector","Message","Loader","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","CancelRoundedIcon","BorderColorRoundedIcon","listOrders","OrderListScreen","history","dispatch","orderList","state","loading","error","orders","userLogin","userInfo","isAdmin","push","map","order","_id","user","name","createdAt","substring","totalPrice","isPaid","paidAt","isDelivered","deliveredAt"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport CancelRoundedIcon from '@material-ui/icons/CancelRounded';\r\nimport BorderColorRoundedIcon from '@material-ui/icons/BorderColorRounded';\r\nimport { listOrders } from '../actions/orderActions'\r\n\r\n\r\nconst OrderListScreen = ({history}) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const orderList = useSelector(state => state.orderList)\r\n    const { loading, error, orders } = orderList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n\r\n    useEffect(() =>{\r\n      if(userInfo && userInfo.isAdmin){\r\n        dispatch(listOrders())\r\n      }else{\r\n        history.push('/login')\r\n      }\r\n        \r\n    }, [dispatch, userInfo ,history])\r\n\r\n    return (\r\n        <div className=\"userList__container\">\r\n            <h1>Orders</h1>\r\n            {loading ? <Loader /> : error ? <Message severity=\"error\">{error}</Message>\r\n            : (\r\n                <TableContainer component={Paper}>\r\n                    <Table className=\"userList__table\" aria-label=\"simple table\">\r\n                        <TableHead>\r\n                        <TableRow>\r\n                            <TableCell>Id</TableCell>\r\n                            <TableCell align=\"right\">User</TableCell>\r\n                            <TableCell align=\"right\">Date</TableCell>\r\n                            <TableCell align=\"right\">Total</TableCell>\r\n                            <TableCell align=\"right\">Paid</TableCell>\r\n                            <TableCell align=\"right\">Delivered</TableCell>\r\n                        </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                        {orders.map((order) => (\r\n                            <TableRow key={order._id}>\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    {order._id}\r\n                                </TableCell>\r\n                                <TableCell align=\"right\">{order.user && order.user.name}</TableCell>\r\n                                <TableCell align=\"right\">{order.createdAt.substring(0,10)}</TableCell>\r\n                                <TableCell align=\"right\">${order.totalPrice}</TableCell>\r\n                                <TableCell align=\"right\">{order.isPaid ? order.paidAt.substring(0,10) : (\r\n                                    <CancelRoundedIcon />\r\n                                ) }</TableCell>\r\n                                <TableCell align=\"right\">{order.isDelivered ? order.deliveredAt : (\r\n                                    <CancelRoundedIcon />\r\n                                ) }</TableCell>\r\n                                <TableCell align=\"right\">\r\n                                    <Link to={`/order/${order._id}`}>\r\n                                        <IconButton aria-label=\"order\" color=\"primary\"><BorderColorRoundedIcon /></IconButton>\r\n                                    </Link>\r\n                                    \r\n                                </TableCell> \r\n                            </TableRow>\r\n                        ))}\r\n                        </TableBody>\r\n                    </Table>\r\n    </TableContainer>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OrderListScreen\r\n"]},"metadata":{},"sourceType":"module"}