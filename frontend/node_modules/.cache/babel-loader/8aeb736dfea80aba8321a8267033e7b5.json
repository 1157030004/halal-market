{"ast":null,"code":"var _jsxFileName = \"G:\\\\code\\\\ecommerce\\\\frontend\\\\src\\\\screens\\\\CartScreen.js\";\nimport React, { useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Message from \"../components/Message\";\nimport { addToCart } from \"../actions/cartActions\";\nimport \"./CartScreen.css\";\nimport { Button, Grid, List, ListItem, Select } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nconst CartScreen = ({\n  match,\n  location,\n  history\n}) => {\n  const productId = match.params.id;\n  const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1;\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const {\n    cartItems\n  } = cart;\n  console.log(cartItems);\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, [dispatch, productId, qty]);\n\n  const removeFromCartHandler = id => {\n    console.log('remove');\n  };\n\n  const checkoutHandler = () => {\n    history.push(\"/login?redirect=shipping\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }\n  }, \"Shopping Cart\"), cartItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 43\n    }\n  }, \"Your cart is empty \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 71\n    }\n  }, \"Go Back\")) : /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 43\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 43\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 25\n    }\n  }, \"$\", item.price), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    labelId: \"label\",\n    id: \"select\",\n    value: item.qty,\n    onChange: e => dispatch(addToCart(item.product, Number(e.target.value))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 29\n    }\n  }, [...Array(item.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 41\n    }\n  }, x + 1)))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"default\",\n    component: \"span\",\n    onClick: () => removeFromCartHandler(item.product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(DeleteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 33\n    }\n  })))), cartItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 43\n    }\n  }, \"Your cart is empty \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 71\n    }\n  }, \"Go Back\")) : /*#__PURE__*/React.createElement(List, {\n    className: \"cartScreen__leftList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, cartItems.map(item => /*#__PURE__*/React.createElement(ListItem, {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 41\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }\n  }, \"$\", item.price), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    labelId: \"label\",\n    id: \"select\",\n    value: item.qty,\n    onChange: e => dispatch(addToCart(item.product, Number(e.target.value))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 41\n    }\n  }, [...Array(item.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 53\n    }\n  }, x + 1)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"default\",\n    component: \"span\",\n    onClick: () => removeFromCartHandler(item.product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(DeleteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 45\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    className: \"cartScreen__rightList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartScreen__subtotal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, \"Subtotal (\", cartItems.reduce((acc, item) => acc + item.qty, 0), \") items\")), \"$\", cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)), /*#__PURE__*/React.createElement(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    component: \"span\",\n    disabled: cartItems.length === 0,\n    onClick: checkoutHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  }, \"Checkout\")))));\n};\n\nexport default CartScreen;","map":{"version":3,"sources":["G:/code/ecommerce/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","Link","useDispatch","useSelector","Message","addToCart","Button","Grid","List","ListItem","Select","DeleteIcon","CartScreen","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","console","log","removeFromCartHandler","checkoutHandler","push","length","item","image","name","product","price","e","target","value","Array","countInStock","keys","map","x","reduce","acc","toFixed"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Message from \"../components/Message\"\r\nimport { addToCart } from \"../actions/cartActions\"\r\nimport \"./CartScreen.css\"\r\nimport { Button, Grid, List, ListItem, Select } from '@material-ui/core'\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst CartScreen = ({ match, location, history }) => {\r\n    const productId = match.params.id\r\n\r\n    const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector(state => state.cart)\r\n    const { cartItems } = cart\r\n    console.log(cartItems)\r\n\r\n    useEffect(() => {\r\n        if (productId) {\r\n            dispatch(addToCart(productId, qty))\r\n        }\r\n    }, [dispatch, productId, qty])\r\n\r\n    const removeFromCartHandler = (id) => {\r\n        console.log('remove')\r\n    }\r\n\r\n    const checkoutHandler = () => {\r\n        history.push(\"/login?redirect=shipping\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"cartScreen\">\r\n            <div className=\"cartScreen__left\">\r\n                <h1>Shopping Cart</h1>\r\n                {cartItems.length === 0 ? <Message>Your cart is empty <Link to=\"/\">Go Back</Link></Message> : (\r\n                    <Grid container spacing={3}>\r\n                        <Grid item xs={3}><img src={item.image} alt={item.name}></img></Grid>\r\n                        <Grid item xs={3}><Link to={`/product/${item.product}`}>{item.name}</Link></Grid>\r\n                        <Grid item xs={3}>${item.price}</Grid>\r\n\r\n                        <Grid item xs={3}>\r\n                            <Select labelId=\"label\" id=\"select\" value={item.qty} onChange={(e) =>\r\n                                dispatch(addToCart(item.product, Number(e.target.value)))}>\r\n\r\n                                {\r\n                                    [...Array(item.countInStock).keys()].map(x => (\r\n                                        <option key={x + 1} value={x + 1}>\r\n                                            {x + 1}\r\n                                        </option>\r\n                                    ))}\r\n                            </Select>\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                            <Button variant=\"contained\" color=\"default\" component=\"span\" onClick={() => removeFromCartHandler(item.product)}>\r\n                                <DeleteIcon></DeleteIcon>\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                    </Grid>\r\n                )}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                {cartItems.length === 0 ? <Message>Your cart is empty <Link to=\"/\">Go Back</Link></Message> : (\r\n                    <List className=\"cartScreen__leftList\">\r\n                        {cartItems.map(item => (\r\n                            <ListItem key={item.product}>\r\n                                <div className=\"cartScreen__item\">\r\n                                    <div className=\"cartScreen__item\">\r\n                                        <img src={item.image} alt={item.name}></img>\r\n                                    </div>\r\n                                    <div className=\"cartScreen__item\">\r\n                                        <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                                    </div>\r\n                                    <div className=\"cartScreen__item\">${item.price}</div>\r\n                                    <div className=\"cartScreen__item\">\r\n                                        <Select labelId=\"label\" id=\"select\" value={item.qty} onChange={(e) =>\r\n                                            dispatch(addToCart(item.product, Number(e.target.value)))}>\r\n\r\n                                            {\r\n                                                [...Array(item.countInStock).keys()].map(x => (\r\n                                                    <option key={x + 1} value={x + 1}>\r\n                                                        {x + 1}\r\n                                                    </option>\r\n                                                ))}\r\n                                        </Select>\r\n                                    </div>\r\n                                    <div className=\"cartScreen__item\">\r\n                                        <Button variant=\"contained\" color=\"default\" component=\"span\" onClick={() => removeFromCartHandler(item.product)}>\r\n                                            <DeleteIcon></DeleteIcon>\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </ListItem>\r\n                        ))}\r\n                    </List>\r\n                )}\r\n            </div>\r\n            <div className=\"cartScreen__right\">\r\n                <List className=\"cartScreen__rightList\">\r\n                    <ListItem>\r\n                        <div className=\"cartScreen__subtotal\">\r\n                            <h2>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h2>\r\n                        </div>\r\n                        ${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)}\r\n                    </ListItem>\r\n                    <ListItem>\r\n                        <Button variant=\"contained\" color=\"secondary\" component=\"span\" disabled={cartItems.length === 0} onClick={checkoutHandler}>\r\n                            Checkout\r\n                    </Button>\r\n                    </ListItem>\r\n                </List>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CartScreen\r\n"]},"metadata":{},"sourceType":"module"}