{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import IconButton from'@material-ui/core/IconButton';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Paper from'@material-ui/core/Paper';import CheckCircleRoundedIcon from'@material-ui/icons/CheckCircleRounded';import CancelRoundedIcon from'@material-ui/icons/CancelRounded';import BorderColorRoundedIcon from'@material-ui/icons/BorderColorRounded';import DeleteIcon from'@material-ui/icons/Delete';import{listUsers,deleteUser}from'../actions/userActions';var UserListScreen=function UserListScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDelete=useSelector(function(state){return state.userDelete;});var successDelete=userDelete.success;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{history.push('/login');}},[dispatch,userInfo,history,successDelete]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure?')){dispatch(deleteUser(id));}};return/*#__PURE__*/React.createElement(\"div\",{className:\"userList__container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Users\"),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{severity:\"error\"},error):/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:\"userList__table\",\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Id\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Email\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Admin\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"}))),/*#__PURE__*/React.createElement(TableBody,null,users.map(function(user){return/*#__PURE__*/React.createElement(TableRow,{key:user._id},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},user._id),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},user.name),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(user.email)},user.email)),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},user.isAdmin?/*#__PURE__*/React.createElement(CheckCircleRoundedIcon,null):/*#__PURE__*/React.createElement(CancelRoundedIcon,null)),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/user/\".concat(user._id,\"/edit\")},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\",color:\"primary\"},/*#__PURE__*/React.createElement(BorderColorRoundedIcon,null))),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\",color:\"primary\",onClick:function onClick(){return deleteHandler(user._id);}},/*#__PURE__*/React.createElement(DeleteIcon,null))));})))));};export default UserListScreen;","map":{"version":3,"sources":["G:/code/ecommerce/frontend/src/screens/UserListScreen.js"],"names":["React","useEffect","Link","useDispatch","useSelector","Message","Loader","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","CheckCircleRoundedIcon","CancelRoundedIcon","BorderColorRoundedIcon","DeleteIcon","listUsers","deleteUser","UserListScreen","history","dispatch","userList","state","loading","error","users","userLogin","userInfo","userDelete","successDelete","success","isAdmin","push","deleteHandler","id","window","confirm","map","user","_id","name","email"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport CheckCircleRoundedIcon from '@material-ui/icons/CheckCircleRounded';\r\nimport CancelRoundedIcon from '@material-ui/icons/CancelRounded';\r\nimport BorderColorRoundedIcon from '@material-ui/icons/BorderColorRounded';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { listUsers, deleteUser } from '../actions/userActions'\r\n\r\n\r\nconst UserListScreen = ({history}) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const userList = useSelector(state => state.userList)\r\n    const { loading, error, users } = userList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const userDelete = useSelector(state => state.userDelete)\r\n    const { success:successDelete } = userDelete\r\n\r\n\r\n    useEffect(() =>{\r\n      if(userInfo && userInfo.isAdmin){\r\n        dispatch(listUsers())\r\n      }else{\r\n        history.push('/login')\r\n      }\r\n        \r\n    }, [dispatch, userInfo ,history, successDelete])\r\n\r\n    const deleteHandler = (id) =>{\r\n      if(window.confirm('Are you sure?')){\r\n        dispatch(deleteUser(id))\r\n      }\r\n    }\r\n\r\n    return (\r\n        <div className=\"userList__container\">\r\n            <h1>Users</h1>\r\n            {loading ? <Loader /> : error ? <Message severity=\"error\">{error}</Message>\r\n            : (\r\n                <TableContainer component={Paper}>\r\n      <Table className=\"userList__table\" aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Id</TableCell>\r\n            <TableCell align=\"right\">Name</TableCell>\r\n            <TableCell align=\"right\">Email</TableCell>\r\n            <TableCell align=\"right\">Admin</TableCell>\r\n            <TableCell align=\"right\"></TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {users.map((user) => (\r\n            <TableRow key={user._id}>\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                {user._id}\r\n              </TableCell>\r\n              <TableCell align=\"right\">{user.name}</TableCell>\r\n              <TableCell align=\"right\"><a href={`mailto:${user.email}`} >{user.email}</a></TableCell>\r\n              <TableCell align=\"right\">{user.isAdmin ? (<CheckCircleRoundedIcon />) : (\r\n                  <CancelRoundedIcon />\r\n              ) }</TableCell>\r\n              <TableCell align=\"right\">\r\n                  <Link to={`/admin/user/${user._id}/edit`}>\r\n                    <IconButton aria-label=\"delete\" color=\"primary\"><BorderColorRoundedIcon /></IconButton>\r\n                  </Link>\r\n                  <IconButton aria-label=\"delete\" color=\"primary\" onClick={() => deleteHandler(user._id)}><DeleteIcon /></IconButton>\r\n                  </TableCell>\r\n                  \r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserListScreen\r\n"]},"metadata":{},"sourceType":"module"}