{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import Paginate from'../components/Paginate';import IconButton from'@material-ui/core/IconButton';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Paper from'@material-ui/core/Paper';import BorderColorRoundedIcon from'@material-ui/icons/BorderColorRounded';import DeleteIcon from'@material-ui/icons/Delete';import AddIcon from'@material-ui/icons/Add';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';var ProductListScreen=function ProductListScreen(_ref){var history=_ref.history,match=_ref.match;var pageNumber=match.params.pageNumber||1;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,pages=productList.pages,page=productList.page;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts('',pageNumber));}},[dispatch,userInfo,history,successDelete,successCreate,createdProduct,pageNumber]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure?')){dispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/React.createElement(\"div\",{className:\"userList__container\"},/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Products\")),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(IconButton,{color:\"primary\",onClick:createProductHandler},/*#__PURE__*/React.createElement(AddIcon,null),\" Create Product\"))),loadingDelete&&/*#__PURE__*/React.createElement(Loader,null),errorDelete&&/*#__PURE__*/React.createElement(Message,{severity:\"error\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(Loader,null),errorCreate&&/*#__PURE__*/React.createElement(Message,{severity:\"error\"},errorCreate),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{severity:\"error\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:\"userList__table\",\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Id\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Price\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Category\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Brand\"))),/*#__PURE__*/React.createElement(TableBody,null,products.map(function(product){return/*#__PURE__*/React.createElement(TableRow,{key:product._id},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},product._id),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},product.name),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"$\",product.price),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},product.category),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},product.brand),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/product/\".concat(product._id,\"/edit\")},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\",color:\"primary\"},/*#__PURE__*/React.createElement(BorderColorRoundedIcon,null))),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\",color:\"primary\",onClick:function onClick(){return deleteHandler(product._id);}},/*#__PURE__*/React.createElement(DeleteIcon,null))));})))),/*#__PURE__*/React.createElement(Paginate,{pages:pages,page:page,isAdmin:true})));};export default ProductListScreen;","map":{"version":3,"sources":["G:/code/ecommerce/frontend/src/screens/ProductListScreen.js"],"names":["React","useEffect","Link","useDispatch","useSelector","Message","Loader","Paginate","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","BorderColorRoundedIcon","DeleteIcon","AddIcon","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","ProductListScreen","history","match","pageNumber","params","dispatch","productList","state","loading","error","products","pages","page","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","userLogin","userInfo","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createProductHandler","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport Paginate from '../components/Paginate'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport BorderColorRoundedIcon from '@material-ui/icons/BorderColorRounded';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions'\r\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants'\r\n\r\nconst ProductListScreen = ({history, match}) => {\r\n    const pageNumber = match.params.pageNumber || 1\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const productList = useSelector(state => state.productList)\r\n    const { loading, error, products, pages, page } = productList\r\n\r\n    const productDelete = useSelector(state => state.productDelete)\r\n    const { loading: loadingDelete, error: errorDelete, success: successDelete  } = productDelete\r\n\r\n    const productCreate = useSelector(state => state.productCreate)\r\n    const { loading: loadingCreate, error: errorCreate, success: successCreate, product: createdProduct  } = productCreate    \r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    useEffect(() =>{\r\n        dispatch({ type: PRODUCT_CREATE_RESET})\r\n\r\n      if(!userInfo.isAdmin){\r\n        history.push('/login')\r\n      }\r\n\r\n      if(successCreate){\r\n          history.push(`/admin/product/${createdProduct._id}/edit`)\r\n      }else{\r\n          dispatch(listProducts('', pageNumber))\r\n      }\r\n        \r\n    }, [dispatch, userInfo ,history, successDelete, successCreate, createdProduct, pageNumber])\r\n\r\n    const deleteHandler = (id) =>{\r\n      if(window.confirm('Are you sure?')){\r\n        dispatch(deleteProduct(id))\r\n      }\r\n    }\r\n\r\n    const createProductHandler = () =>{\r\n        dispatch(createProduct())\r\n    }\r\n\r\n    return (\r\n        <div className=\"userList__container\">\r\n            <TableRow>\r\n                <TableCell><h1>Products</h1></TableCell>\r\n                <TableCell><IconButton color=\"primary\" onClick={createProductHandler}>\r\n                    <AddIcon/> Create Product\r\n                    </IconButton></TableCell>\r\n            </TableRow>\r\n            {loadingDelete && <Loader />}\r\n            {errorDelete && <Message severity=\"error\">{errorDelete}</Message>}\r\n            {loadingCreate && <Loader />}\r\n            {errorCreate && <Message severity=\"error\">{errorCreate}</Message>}\r\n            {loading ? <Loader /> : error ? <Message severity=\"error\">{error}</Message>\r\n            : (\r\n                <>\r\n            <TableContainer component={Paper}>\r\n                <Table className=\"userList__table\" aria-label=\"simple table\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Id</TableCell>\r\n                        <TableCell align=\"right\">Name</TableCell>\r\n                        <TableCell align=\"right\">Price</TableCell>\r\n                        <TableCell align=\"right\">Category</TableCell>\r\n                        <TableCell align=\"right\">Brand</TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {products.map((product) => (\r\n                        <TableRow key={product._id}>\r\n                            <TableCell component=\"th\" scope=\"row\">\r\n                            {product._id}\r\n                            </TableCell>\r\n                            <TableCell align=\"right\">{product.name}</TableCell>\r\n                            <TableCell align=\"right\">${product.price}</TableCell>\r\n                            <TableCell align=\"right\">{product.category}</TableCell>\r\n                            <TableCell align=\"right\">{product.brand}</TableCell>\r\n                            <TableCell align=\"right\">\r\n                            <Link to={`/admin/product/${product._id}/edit`}>\r\n                                <IconButton aria-label=\"delete\" color=\"primary\"><BorderColorRoundedIcon /></IconButton>\r\n                            </Link>\r\n                            <IconButton aria-label=\"delete\" color=\"primary\" onClick={() => deleteHandler(product._id)}><DeleteIcon /></IconButton>\r\n                            </TableCell>\r\n                            \r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n            </TableContainer>\r\n            <Paginate pages={pages} page={page} isAdmin={true}/>\r\n            </>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductListScreen\r\n"]},"metadata":{},"sourceType":"module"}