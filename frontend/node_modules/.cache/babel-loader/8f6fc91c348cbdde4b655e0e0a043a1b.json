{"ast":null,"code":"var _jsxFileName = \"G:\\\\code\\\\ecommerce\\\\frontend\\\\src\\\\screens\\\\ProductScreen.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport \"./ProductScreen.css\";\nimport { Button, InputLabel, MenuItem, Select, Table, TableRow } from '@material-ui/core';\nimport Rating from '../components/Rating';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { listProductDetails, createProductReview } from \"../actions/productActions\";\nimport { PRODUCT_CREATE_REVIEW_RESET } from '../constants/productConstants';\nimport FormContainer from '../components/FormContainer';\nimport { TextValidator, ValidatorForm } from 'react-material-ui-form-validator';\n\nconst ProductScreen = ({\n  history,\n  match\n}) => {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const dispatch = useDispatch();\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    loading,\n    error,\n    product\n  } = productDetails;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const productReviewCreate = useSelector(state => state.productReviewCreate);\n  const {\n    success: successProductReview,\n    error: errorProductReview\n  } = productReviewCreate;\n  useEffect(() => {\n    if (successProductReview) {\n      alert('Review Submitted!');\n      setRating(0);\n      setComment('');\n      dispatch({\n        type: PRODUCT_CREATE_REVIEW_RESET\n      });\n    }\n\n    dispatch(listProductDetails(match.params.id));\n  }, [dispatch, match, successProductReview]);\n\n  const addToCartHandler = () => {\n    history.push(`/cart/${match.params.id}?qty=${qty}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(createProductReview(match.params.id, {\n      rating,\n      comment\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 24\n    }\n  }) : error ? /*#__PURE__*/React.createElement(Message, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 46\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: product.image,\n    alt: product.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  }, product.name), /*#__PURE__*/React.createElement(Rating, {\n    value: product.rating,\n    text: `${product.numReviews} reviews`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, `Price: $${product.price}`), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, product.description)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__right\",\n    role: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex__table__row\",\n    role: \"rowgroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 33\n    }\n  }, \"Price:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex__rowChild\",\n    role: \"cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 33\n    }\n  }, \"$\", product.price)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex__table__row\",\n    role: \"rowgroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 33\n    }\n  }, \"Status:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex__rowChild\",\n    role: \"cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 33\n    }\n  }, product.countInStock > 0 ? \"In Stock\" : \"Out of Stock\")), product.countInStock > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex__table__row\",\n    role: \"rowgroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }, \"Qty:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex__rowChild\",\n    role: \"cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    labelId: \"label\",\n    id: \"select\",\n    value: qty,\n    onChange: e => setQty(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 41\n    }\n  }, [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 53\n    }\n  }, x + 1))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add__cart\",\n    role: \"rowgroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: addToCartHandler,\n    variant: \"outlined\",\n    disabled: product.countInStock === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, \"Add to cart\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, \"Reviews\"), product.reviews.length === 0 && /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 59\n    }\n  }, \"No Reviews\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review__list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, product.reviews.map(review => /*#__PURE__*/React.createElement(\"div\", {\n    key: review._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 37\n    }\n  }, review.name), /*#__PURE__*/React.createElement(Rating, {\n    value: review.rating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 37\n    }\n  }, review.createdAt.substring(0, 10)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 37\n    }\n  }, review.comment))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, \"Write a Customer Review\"), errorProductReview && /*#__PURE__*/React.createElement(Message, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 57\n    }\n  }, errorProductReview), userInfo ? /*#__PURE__*/React.createElement(FormContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(ValidatorForm, {\n    onSubmit: submitHandler,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    htmlFor: \"age-native-label-placeholder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 41\n    }\n  }, \"Rating\"), /*#__PURE__*/React.createElement(Select, {\n    labelId: \"select-rating\",\n    label: \"Rating\",\n    id: \"rating\",\n    value: rating,\n    onChange: e => setRating(e.target.value),\n    style: {\n      border: '1px solid #ced4da',\n      borderRadius: 4,\n      backgroundColor: '#f2f2f2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 64\n    }\n  }, \"None\")), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 45\n    }\n  }, \"1 - Poor\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 45\n    }\n  }, \"2 - Fair\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 45\n    }\n  }, \"3 - Good\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 45\n    }\n  }, \"4 - Very Good\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 45\n    }\n  }, \"5 - Excellent\")), /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    htmlFor: \"age-native-label-placeholder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 45\n    }\n  }, \"Comment\"), /*#__PURE__*/React.createElement(TextValidator, {\n    label: \"Write a comment here...\",\n    onChange: e => setComment(e.target.value),\n    name: \"comment\",\n    value: comment,\n    multiline: true,\n    style: {\n      width: '150%',\n      borderRadius: 4,\n      backgroundColor: '#f2f2f2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 45\n    }\n  }, \"Update\"))) : /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 37\n    }\n  }, \"Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 71\n    }\n  }, \"sign in \")), \"to write a review\"))))));\n};\n\nexport default ProductScreen;","map":{"version":3,"sources":["G:/code/ecommerce/frontend/src/screens/ProductScreen.js"],"names":["React","useState","useEffect","Link","Button","InputLabel","MenuItem","Select","Table","TableRow","Rating","useDispatch","useSelector","Message","Loader","listProductDetails","createProductReview","PRODUCT_CREATE_REVIEW_RESET","FormContainer","TextValidator","ValidatorForm","ProductScreen","history","match","qty","setQty","rating","setRating","comment","setComment","dispatch","productDetails","state","loading","error","product","userLogin","userInfo","productReviewCreate","success","successProductReview","errorProductReview","alert","type","params","id","addToCartHandler","push","submitHandler","e","preventDefault","image","name","numReviews","price","description","countInStock","target","value","Array","keys","map","x","reviews","length","review","_id","createdAt","substring","border","borderRadius","backgroundColor","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport \"./ProductScreen.css\"\r\nimport { Button, InputLabel, MenuItem, Select, Table, TableRow } from '@material-ui/core'\r\nimport Rating from '../components/Rating'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport { listProductDetails, createProductReview } from \"../actions/productActions\"\r\nimport { PRODUCT_CREATE_REVIEW_RESET } from '../constants/productConstants'\r\nimport FormContainer from '../components/FormContainer'\r\nimport { TextValidator, ValidatorForm } from 'react-material-ui-form-validator'\r\n\r\nconst ProductScreen = ({ history, match }) => {\r\n    const [qty, setQty] = useState(1)\r\n    const [rating, setRating] = useState(0)\r\n    const [comment, setComment] = useState('')\r\n\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const productDetails = useSelector(state => state.productDetails)\r\n    const { loading, error, product } = productDetails\r\n    \r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const productReviewCreate = useSelector(state => state.productReviewCreate)\r\n    const { success: successProductReview, error: errorProductReview } = productReviewCreate\r\n\r\n    useEffect(() => {\r\n        if(successProductReview){\r\n            alert('Review Submitted!')\r\n            setRating(0)\r\n            setComment('')\r\n            dispatch({ type: PRODUCT_CREATE_REVIEW_RESET })\r\n        }\r\n        dispatch(listProductDetails(match.params.id))\r\n    }, [dispatch, match, successProductReview])\r\n\r\n\r\n    const addToCartHandler = () => {\r\n        history.push(`/cart/${match.params.id}?qty=${qty}`)\r\n    }\r\n\r\n    const submitHandler = e =>{\r\n        e.preventDefault()\r\n        dispatch(createProductReview(match.params.id, {\r\n            rating,\r\n            comment\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading ? < Loader /> : error ? <Message severity=\"error\">{error}</Message>\r\n                : (\r\n                    <>\r\n                    <div className=\"product__item\">\r\n\r\n                        <div className=\"product__image\">\r\n                            <img src={product.image} alt={product.name}></img>\r\n                        </div>\r\n\r\n                        <div className=\"product__left\">\r\n                            <h3>{product.name}</h3>\r\n                            <Rating value={product.rating} text={`${product.numReviews} reviews`} />\r\n                            <h4>{`Price: $${product.price}`}</h4>\r\n                            <p>{product.description}</p>\r\n                        </div>\r\n\r\n                        <div className=\"product__right\" role=\"table\">\r\n\r\n\r\n                            <div className=\"flex__table__row\" role=\"rowgroup\">\r\n                                <InputLabel id=\"label\">Price:</InputLabel>\r\n                                <div className=\"flex__rowChild\" role=\"cell\">${product.price}</div>\r\n                            </div>\r\n\r\n                            <div className=\"flex__table__row\" role=\"rowgroup\">\r\n                                <InputLabel id=\"label\">Status:</InputLabel>\r\n                                <div className=\"flex__rowChild\" role=\"cell\">{product.countInStock > 0 ? \"In Stock\" : \"Out of Stock\"}</div>\r\n                            </div>\r\n\r\n                            {product.countInStock > 0 && (\r\n                                <div className=\"flex__table__row\" role=\"rowgroup\">\r\n                                    <InputLabel id=\"label\">Qty:</InputLabel>\r\n                                    <div className=\"flex__rowChild\" role=\"cell\">\r\n                                        <Select labelId=\"label\" id=\"select\" value={qty} onChange={(e) =>\r\n                                            setQty(e.target.value)}>\r\n\r\n                                            {\r\n                                                [...Array(product.countInStock).keys()].map(x => (\r\n                                                    <option key={x + 1} value={x + 1}>\r\n                                                        {x + 1}\r\n                                                    </option>\r\n                                                ))}\r\n                                        </Select>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n\r\n\r\n                            <div className=\"add__cart\" role=\"rowgroup\">\r\n                                <Button onClick={addToCartHandler} variant=\"outlined\" disabled={product.countInStock === 0}>Add to cart</Button>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"review__container\">\r\n                        <h2>Reviews</h2>\r\n                        {product.reviews.length === 0 &&  <Message>No Reviews</Message>}\r\n                        <div className=\"review__list\">\r\n                            {product.reviews.map(review => (\r\n                                <div key={review._id}>\r\n                                    <strong>{review.name}</strong>\r\n                                    <Rating value={review.rating} />\r\n                                    <p>{review.createdAt.substring(0,10)}</p>\r\n                                    <p>{review.comment}</p>\r\n                                </div>\r\n                            ))}\r\n                            <TableRow>\r\n                                <h2>Write a Customer Review</h2>\r\n                                {errorProductReview &&  <Message severity=\"error\">{errorProductReview}</Message>}\r\n                                {userInfo ? (\r\n                                    <FormContainer>\r\n                                        <ValidatorForm onSubmit={submitHandler} variant=\"outlined\">\r\n                                        <InputLabel shrink htmlFor=\"age-native-label-placeholder\">\r\n                                        Rating\r\n                                        </InputLabel>\r\n                                        <Select\r\n                                            labelId=\"select-rating\"\r\n                                            label=\"Rating\"\r\n                                            id=\"rating\"\r\n                                            value={rating}\r\n                                            onChange={(e) => setRating(e.target.value)}\r\n                                            style={{\r\n                                                border: '1px solid #ced4da',\r\n                                                borderRadius: 4,\r\n                                                backgroundColor: '#f2f2f2'\r\n                                            }}\r\n                                            >\r\n                                            <MenuItem value=''><em>None</em></MenuItem>\r\n                                            <MenuItem value={1}>1 - Poor</MenuItem>\r\n                                            <MenuItem value={2}>2 - Fair</MenuItem>\r\n                                            <MenuItem value={3}>3 - Good</MenuItem>\r\n                                            <MenuItem value={4}>4 - Very Good</MenuItem>\r\n                                            <MenuItem value={5}>5 - Excellent</MenuItem>\r\n                                            </Select>\r\n\r\n                                            <InputLabel shrink htmlFor=\"age-native-label-placeholder\">\r\n                                            Comment\r\n                                            </InputLabel>\r\n                                            <TextValidator\r\n                                                label=\"Write a comment here...\"\r\n                                                onChange={(e) => setComment(e.target.value)}\r\n                                                name=\"comment\"\r\n                                                value={comment}\r\n                                                multiline\r\n                                                style={{\r\n                                                    width: '150%',\r\n                                                    borderRadius: 4,\r\n                                                    backgroundColor: '#f2f2f2'\r\n                                                }}\r\n                                            ></TextValidator>\r\n                                            <br/>\r\n                                            <Button\r\n                                                color=\"secondary\"\r\n                                                variant=\"contained\"\r\n                                                type=\"submit\"  \r\n                                                >\r\n                                                Update\r\n                                            </Button>\r\n                                        </ValidatorForm>\r\n                                    </FormContainer>\r\n                                ) : <Message>Please <Link to=\"/login\"><b>sign in </b></Link>to write a review</Message>}\r\n                            </TableRow>\r\n                        </div>\r\n                    </div>\r\n                    </>\r\n                )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProductScreen\r\n"]},"metadata":{},"sourceType":"module"}