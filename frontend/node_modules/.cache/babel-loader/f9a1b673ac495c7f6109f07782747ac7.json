{"ast":null,"code":"import _toConsumableArray from\"G:\\\\code\\\\ecommerce\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import Message from\"../components/Message\";import{addToCart,removeFromCart}from\"../actions/cartActions\";import\"./CartScreen.css\";import{Button,Box,Select}from'@material-ui/core';import DeleteIcon from'@material-ui/icons/Delete';var CartScreen=function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var productId=match.params.id;var qty=location.search?Number(location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;console.log(cartItems);useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){history.push(\"/login?redirect=shipping\");};return/*#__PURE__*/React.createElement(\"div\",{className:\"cartScreen\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cartScreen__left\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Shopping Cart\"),cartItems.length===0?/*#__PURE__*/React.createElement(Message,null,\"Your cart is empty \",/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Go Back\")):/*#__PURE__*/React.createElement(\"div\",{className:\"cartScreen__leftList\"},cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"cartScreen__items\"},/*#__PURE__*/React.createElement(Box,{className:\"cartScreen__item\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:item.name,style:{width:\"150px\"}}))),/*#__PURE__*/React.createElement(Box,{className:\"cartScreen__item\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},item.name))),/*#__PURE__*/React.createElement(Box,{className:\"cartScreen__item\"},/*#__PURE__*/React.createElement(\"div\",null,\"$\",item.price)),/*#__PURE__*/React.createElement(Box,{className:\"cartScreen__item\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Select,{labelId:\"label\",id:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));}},_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1);})))),/*#__PURE__*/React.createElement(Box,{className:\"cartScreen__item\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"default\",component:\"span\",onClick:function onClick(){return removeFromCartHandler(item.product);}},/*#__PURE__*/React.createElement(DeleteIcon,null)))));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"cartScreen__right\"},/*#__PURE__*/React.createElement(Box,{className:\"cartScreen__item\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"),/*#__PURE__*/React.createElement(\"h3\",null,\" $\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2),\" \")),/*#__PURE__*/React.createElement(Box,{className:\"cartScreen__item\"},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",component:\"span\",disabled:cartItems.length===0,onClick:checkoutHandler},\"Checkout\"))));};export default CartScreen;","map":{"version":3,"sources":["G:/code/ecommerce/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","Link","useDispatch","useSelector","Message","addToCart","removeFromCart","Button","Box","Select","DeleteIcon","CartScreen","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","console","log","removeFromCartHandler","checkoutHandler","push","length","map","item","image","name","width","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport Message from \"../components/Message\"\r\nimport { addToCart, removeFromCart } from \"../actions/cartActions\"\r\nimport \"./CartScreen.css\"\r\nimport { Button, Box, Select } from '@material-ui/core'\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst CartScreen = ({ match, location, history }) => {\r\n    const productId = match.params.id\r\n\r\n    const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector(state => state.cart)\r\n    const { cartItems } = cart\r\n    console.log(cartItems)\r\n\r\n    useEffect(() => {\r\n        if (productId) {\r\n            dispatch(addToCart(productId, qty))\r\n        }\r\n    }, [dispatch, productId, qty])\r\n\r\n    const removeFromCartHandler = (id) => {\r\n        dispatch(removeFromCart(id))\r\n    }\r\n\r\n    const checkoutHandler = () => {\r\n        history.push(\"/login?redirect=shipping\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"cartScreen\">\r\n            <div className=\"cartScreen__left\">\r\n                <h1>Shopping Cart</h1>\r\n                {cartItems.length === 0 ? <Message>Your cart is empty <Link to=\"/\">Go Back</Link></Message> : (\r\n                    <div className=\"cartScreen__leftList\">\r\n                        {cartItems.map(item => (\r\n                            <div className=\"cartScreen__items\">\r\n\r\n                                <Box className=\"cartScreen__item\">\r\n                                    <div >\r\n                                        <img src={item.image} alt={item.name} style={{ width: \"150px\" }}></img>\r\n                                    </div>\r\n                                </Box>\r\n                                <Box className=\"cartScreen__item\">\r\n                                    <div >\r\n                                        <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                                    </div>\r\n                                </Box>\r\n                                <Box className=\"cartScreen__item\">\r\n                                    <div >${item.price}</div>\r\n                                </Box>\r\n\r\n                                <Box className=\"cartScreen__item\">\r\n                                    <div >\r\n                                        <Select labelId=\"label\" id=\"select\" value={item.qty} onChange={(e) =>\r\n                                            dispatch(addToCart(item.product, Number(e.target.value)))}>\r\n\r\n                                            {\r\n                                                [...Array(item.countInStock).keys()].map(x => (\r\n                                                    <option key={x + 1} value={x + 1}>\r\n                                                        {x + 1}\r\n                                                    </option>\r\n                                                ))}\r\n                                        </Select>\r\n                                    </div>\r\n                                </Box>\r\n                                <Box className=\"cartScreen__item\">\r\n                                    <div >\r\n                                        <Button variant=\"contained\" color=\"default\" component=\"span\" onClick={() => removeFromCartHandler(item.product)}>\r\n                                            <DeleteIcon></DeleteIcon>\r\n                                        </Button>\r\n                                    </div>\r\n                                </Box>\r\n\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div className=\"cartScreen__right\">\r\n                <Box className=\"cartScreen__item\">\r\n                    <h2>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h2>\r\n                    <h3> ${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)} </h3>\r\n                </Box>\r\n                <Box className=\"cartScreen__item\">\r\n                    <Button variant=\"contained\" color=\"secondary\" component=\"span\" disabled={cartItems.length === 0} onClick={checkoutHandler}>\r\n                        Checkout\r\n                    </Button>\r\n                </Box>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CartScreen\r\n"]},"metadata":{},"sourceType":"module"}